/*
  QuoJS 1.0
  (c) 2011, 2012 Javi JimÃ©nez Villar (@soyjavi)
  http://quojs.tapquo.com
*/

var Quo=function(){function a(f,b){f=f||g;f.__proto__=a.prototype;f.selector=b||"";return f}function h(f){if(f){var b=h.getDomainSelector(f);return a(b,f)}else return a()}var g=[];h.extend=function(f){Array.prototype.slice.call(arguments,1).forEach(function(b){for(key in b)f[key]=b[key]});return f};a.prototype=h.fn={};return h}();window.Quo=Quo;"$$"in window||(window.$$=Quo);(function(a){function h(b){return b.filter(function(j){return j!==undefined&&j!==null})}var g=Object.prototype,f=[];a.toType=function(b){return g.toString.call(b).match(/\s([a-z|A-Z]+)/)[1].toLowerCase()};a.isOwnProperty=function(b,j){return g.hasOwnProperty.call(b,j)};a.getDomainSelector=function(b){var j=null,e=[1,9,11],l=a.toType(b);if(l==="array")j=h(b);else if(l==="string")j=a.query(document,b);else if(e.indexOf(b.nodeType)>=0||b===window)j=[b];return j};a.map=function(b,j){var e=[],l;if(a.toType(b)===
"array")for(l=0;l<b.length;l++){var k=j(b[l],l);k!=null&&e.push(k)}else for(l in b){k=j(b[l],l);k!=null&&e.push(k)}return e.length>0?[].concat.apply([],e):e};a.each=function(b,j){var e;if(a.toType(b)==="array")for(e=0;e<b.length;e++){if(j.call(b[e],e,b[e])===false)break}else for(e in b)if(j.call(b[e],e,b[e])===false)break;return b};a.mix=function(){for(var b=0,j=arguments.length;b<j;b++){var e=arguments[b],l;for(l in e)if(a.isOwnProperty(e,l))child[l]=e[l]}return child};a.fn.forEach=f.forEach;a.fn.indexOf=
f.indexOf;a.fn.map=function(b){return a.map(this,function(j,e){return b.call(j,e,j)})};a.fn.pluck=function(b){return this.map(function(){return this[b]})};a.fn.filter=function(b){return a([].filter.call(this,function(j){return j.parentNode&&a.query(j.parentNode,b).indexOf(j)>=0}))}})(Quo);(function(a){a.fn.attr=function(h,g){return a.toType(h)==="string"&&g===undefined?this[0].getAttribute(h):this.each(function(){this.setAttribute(h,g)})};a.fn.data=function(h,g){return this.attr("data-"+h,g)};a.fn.val=function(h){return h?this.each(function(){this.value=h}):this.length>0?this[0].value:null};a.fn.height=function(){return this.offset().height};a.fn.width=function(){return this.offset().width};a.fn.offset=function(){var h=this[0].getBoundingClientRect();return{left:h.left+window.pageXOffset,
top:h.top+window.pageYOffset,width:h.width,height:h.height}};a.fn.remove=function(){return this.each(function(){this.parentNode!=null&&this.parentNode.removeChild(this)})}})(Quo);(function(a){var h=/WebKit\/([\d.]+)/,g={android:/(Android)\s+([\d.]+)/,ipad:/(iPad).*OS\s([\d_]+)/,iphone:/(iPhone\sOS)\s([\d_]+)/,blackberry:/(BlackBerry).*Version\/([\d.]+)/,webos:/(webOS|hpwOS)[\s\/]([\d.]+)/},f=null;a.isMobile=function(){f=f||b();return f.isMobile};a.environment=function(){return f=f||b()};a.isOnline=function(){return navigator.onLine};var b=function(){var j=navigator.userAgent,e={},l=j.match(h);e.browser=l?l[0]:j;var k;for(os in g)if(l=j.match(g[os])){k={name:os==="iphone"||
os==="ipad"?"ios":os,version:l[2]};break}e.os=k;e.isMobile=e.os?true:false;return e}})(Quo);(function(a){a.fn.text=function(h){return!h?this[0].textContent:this.each(function(){this.textContent=h})};a.fn.html=function(h){return!h?this[0].innerHTML:this.each(function(){this.innerHTML=h})};a.fn.append=function(h){return this.each(function(){if(a.toType(h)==="string"){var g=document.createElement();g.innerHTML=h;this.appendChild(g.firstChild)}else this.parentNode.insertBefore(h)})};a.fn.prepend=function(h){return this.each(function(){if(a.toType(h)==="string")this.innerHTML=h+this.innerHTML;
else{var g=this.parentNode;g.insertBefore(h,g.firstChild)}})};a.fn.empty=function(){return this.each(function(){this.innerHTML=null})}})(Quo);(function(a){a.query=function(g,f){var b=document.querySelectorAll(f);return b=Array.prototype.slice.call(b)};a.fn.parent=function(g){var f=this.pluck("parentNode");return h(f,g)};a.fn.siblings=function(g){var f=this.map(function(b,j){return Array.prototype.slice.call(j.parentNode.children).filter(function(e){return e!==j})});return h(f,g)};a.fn.children=function(g){var f=this.map(function(){return Array.prototype.slice.call(this.children)});return h(f,g)};a.fn.get=function(g){return g===undefined?
this:this[g]};a.fn.first=function(){return a(this[0])};a.fn.last=function(){return a(this[this.length-1])};a.fn.closest=function(g,f){var b=this[0],j=a(g);for(j.length||(b=null);b&&j.indexOf(b)<0;)b=b!==f&&b!==document&&b.parentNode;return a(b)};a.fn.each=function(g){this.forEach(function(f,b){g.call(f,b,f)});return this};var h=function(g,f){return f===undefined?a(g):a(g).filter(f)}})(Quo);(function(a){function h(g,f){return f.split(/\s+/g).indexOf(g)>=0}a.fn.addClass=function(g){return this.each(function(){h(g,this.className)||(this.className+=" "+g)})};a.fn.removeClass=function(g){var f=RegExp("(^|\\s+)"+g+"(\\s+|$)");return this.each(function(){if(h(g,this.className))this.className=this.className.replace(f," ")})};a.fn.toggleClass=function(g){var f=RegExp("(^|\\s+)"+g+"(\\s+|$)");return this.each(function(){if(h(g,this.className))this.className=this.className.replace(f,"");else this.className+=
" "+g})};a.fn.hasClass=function(g){return h(g,this[0].className)};a.fn.style=function(g,f){return!f?this[0].style[g]:this.each(function(){this.style[g]=f})}})(Quo);(function(a){function h(k,c){if(c.contentType)c.headers["Content-Type"]=c.contentType;if(c.dataType)c.headers.Accept=j[c.dataType];for(header in c.headers)k.setRequestHeader(header,c.headers[header])}function g(k,c){k.onreadystatechange={};k.abort();c.error.call(c.context,"QuoJS \u00bb $$.ajax : timeout exceeded",k,c)}function f(k,c){var d=k.responseText;if(c.dataType===b.MIME)try{d=JSON.parse(d)}catch(i){d=i;c.error.call(c.context,"Parse Error",k,c)}return d}var b={TYPE:"GET",MIME:"json"},j={script:"text/javascript, application/javascript",
json:"application/json",xml:"application/xml, text/xml",html:"text/html",text:"text/plain"},e=0;a.ajaxSettings={type:b.TYPE,async:true,success:{},error:{},context:null,dataType:b.MIME,headers:{},xhr:function(){return new window.XMLHttpRequest},crossDomain:false,timeout:0};a.ajax=function(k){var c=a.mix(a.ajaxSettings,k);if(/=\?/.test(c.url))return a.jsonp(c);var d=c.xhr();d.onreadystatechange=function(){if(d.readyState===4){clearTimeout(i);if(d.status===200){if(c.async){var m=f(d,c);c.success.call(c.context,
m,d)}}else c.error.call(c.context,"QuoJS \u00bb $$.ajax",d,c)}};d.open(c.type,c.url,c.async);h(d,c);if(c.timeout>0)var i=setTimeout(function(){g(d,c)},c.timeout);d.send(c.data);return c.async?d:f(d,c)};a.jsonp=function(k){var c="jsonp"+ ++e,d=document.createElement("script"),i={abort:function(){a(d).remove();if(c in window)window[c]={}}},m;window[c]=function(o){clearTimeout(m);a(d).remove();delete window[c];k.success.call(k.context,o,i)};d.src=k.url.replace(/=\?/,"="+c);a("head").append(d);if(k.timeout>
0)m=setTimeout(function(){g(i,k)},k.timeout);return i};a.get=function(k,c,d,i){k+=l(c);return a.ajax({url:k,success:d,dataType:i})};a.post=function(k,c,d,i){return a.ajax({type:"POST",url:k,data:c,success:d,dataType:i,contentType:"application/x-www-form-urlencoded"})};a.json=function(k,c,d){k+=l(c);console.error("json ",k);return a.ajax({url:k,success:d,dataType:b.MIME})};var l=function(k){var c="?",d;for(d in k)if(k.hasOwnProperty(d)){if(c!=="?")c+="&";c+=d+"="+k[d]}return c==="?"?"":c}})(Quo);(function(a){var h={touch:"touchstart",tap:"tap"},g=/complete|loaded|interactive/;["touch","tap"].forEach(function(f){a.fn[f]=function(b){a(document.body).delegate(this.selector,h[f],b);return this}});a.fn.on=function(f,b,j){return b===undefined||a.toType(b)==="function"?this.bind(f,b):this.delegate(b,f,j)};a.fn.off=function(f,b,j){return b===undefined||a.toType(b)==="function"?this.unbind(f,b):this.undelegate(b,f,j)};a.fn.ready=function(f){g.test(document.readyState)?f(a):document.addEventListener("DOMContentLoaded",
function(){f(a)},false);return this}})(Quo);(function(a){function h(d,i,m,o,n){i=a.isMobile()?i:c[i];var p=d._id||(d._id=e++);p=l[p]||(l[p]=[]);n=n&&n(m,i);i={event:i,callback:m,selector:o,proxy:f(n,m,d),delegate:n,index:p.length};p.push(i);d.addEventListener(i.event,i.proxy,false)}function g(d,i,m,o){i=a.isMobile()?i:c[i];var n=d._id||(d._id=e++);b(n,i,m,o).forEach(function(p){delete l[n][p.index];d.removeEventListener(p.event,p.proxy,false)})}function f(d,i,m){i=d||i;return function(o){var n=i.apply(m,[o].concat(o.data));n===false&&o.preventDefault();
return n}}function b(d,i,m,o){return(l[d]||[]).filter(function(n){return n&&(!i||n.event==i)&&(!m||n.fn==m)&&(!o||n.selector==o)})}function j(d){var i=a.extend({originalEvent:d},d);a.each(k,function(m,o){i[m]=function(){this[o]=function(){return true};return d[m].apply(d,arguments)};i[o]=function(){return false}});return i}var e=1,l={},k={preventDefault:"isDefaultPrevented",stopImmediatePropagation:"isImmediatePropagationStopped",stopPropagation:"isPropagationStopped"},c={touchstart:"mousedown",touchmove:"mousemove",
touchend:"mouseup",tap:"click",doubletap:"dblclick",orientation_change:"resize"};a.Event=function(d){var i=document.createEvent("Events");i.initEvent(d,true,true,null,null,null,null,null,null,null,null,null,null,null,null);return i};a.fn.bind=function(d,i){return this.each(function(){h(this,d,i)})};a.fn.unbind=function(d,i){return this.each(function(){g(this,d,i)})};a.fn.trigger=function(d){a.isMobile()||console.log("Event "+d+" captured.");if(a.toType(d)==="string")d=a.Event(d);return this.each(function(){this.dispatchEvent(d)})};
a.fn.delegate=function(d,i,m){return this.each(function(o,n){h(n,i,m,d,function(p){return function(r){var q=a(r.target).closest(d,n).get(0);if(q){var s=a.extend(j(r),{currentTarget:q,liveFired:n});return p.apply(q,[s].concat([].slice.call(arguments,1)))}}})})};a.fn.undelegate=function(d,i,m){return this.each(function(){g(this,i,m,d)})}})(Quo);(function(a){function h(c){var d=Date.now(),i=d-(e.last||d);c=a.isMobile()?c.touches[0]:c;l&&clearTimeout(l);e={el:a("tagName"in c.target?c.target:c.target.parentNode),x1:c.pageX,y1:c.pageY,isDoubleTap:i>0&&i<=250?true:false,last:d};setTimeout(j,k)}function g(c){c=a.isMobile()?c.touches[0]:c;e.x2=c.pageX;e.y2=c.pageY}function f(){if(e.isDoubleTap){e.el.trigger("doubleTap");e={}}else if(e.x2>0||e.y2>0){(Math.abs(e.x1-e.x2)>30||Math.abs(e.y1-e.y2)>30)&&e.el.trigger("swipe")&&e.el.trigger("swipe"+(Math.abs(e.x1-
e.x2)>=Math.abs(e.y1-e.y2)?e.x1-e.x2>0?"Left":"Right":e.y1-e.y2>0?"Up":"Down"));e.x1=e.x2=e.y1=e.y2=e.last=0;e={}}else l=setTimeout(function(){l=null;e={}},250)}function b(){e={};clearTimeout(l)}function j(){if(e.last&&Date.now()-e.last>=k){e.el.trigger("longTap");e={}}}var e={},l,k=750;["swipe","swipeLeft","swipeRight","swipeUp","swipeDown","doubleTap","longTap"].forEach(function(c){a.fn[c]=function(d){return this.on(c,d)}});a(document).ready(function(){var c=a(document.body);c.bind("touchstart",
h);c.bind("touchmove",g);c.bind("touchend",f);c.bind("touchcancel",b)})})(Quo);
